const t={TASKS:"zen_tasks",TIMER:"zen_timer",SETTINGS:"zen_settings"},n={focusDuration:25,breakDuration:5,longBreakDuration:15,cyclesBeforeLongBreak:4,theme:"forest",backgroundInteractions:!0,backgroundTransitions:!0,musicEnabled:!0,musicVolume:50,showTransitionChime:!0,enableBreakReminders:!0,backgroundIntensity:50,reduceMotion:!1,autoReturnToListOnBreak:!1},r={isRunning:!1,mode:"focus",remainingSeconds:20*60,activeTaskId:null,lastTick:Date.now(),cyclesCompleted:0},i={async getTasks(){let s=(await chrome.storage.local.get(t.TASKS))[t.TASKS]||[];if(s.length===0){const o=(await chrome.storage.sync.get(t.TASKS))[t.TASKS]||[];o.length>0&&(console.log("Migrating tasks from sync to local..."),s=o.map(a=>({...a,id:a.id||crypto.randomUUID(),totalTimeMs:a.totalTimeMs||0,sessionTimeMs:0,pomodorosCompleted:a.pomodorosCompleted||0,updatedAt:Date.now()})),await this.saveTasks(s))}return s},async saveTasks(e){await chrome.storage.local.set({[t.TASKS]:e})},async getTimerState(){return(await chrome.storage.local.get(t.TIMER))[t.TIMER]||r},async saveTimerState(e){await chrome.storage.local.set({[t.TIMER]:e})},async getSettings(){const e=await chrome.storage.local.get(t.SETTINGS);return{...n,...e[t.SETTINGS]||{}}},async saveSettings(e){await chrome.storage.local.set({[t.SETTINGS]:e})},onChange(e){chrome.storage.onChanged.addListener(e)}};export{i as S};
