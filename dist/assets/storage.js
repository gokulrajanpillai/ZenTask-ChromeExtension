const s={TASKS:"zen_tasks",TIMER:"zen_timer",SETTINGS:"zen_settings"},n={focusDuration:25,breakDuration:5,longBreakDuration:15,cyclesBeforeLongBreak:4,enableSound:!0,masterVolume:80,focusSound:"none",focusVolume:50,breakSound:"singing_bowls",breakVolume:50,enableCues:!0,cueVolume:70,enableBreakReminders:!0,backgroundIntensity:50,reduceMotion:!1},r={isRunning:!1,mode:"focus",remainingSeconds:20*60,activeTaskId:null,lastTick:Date.now(),cyclesCompleted:0},l={async getTasks(){let t=(await chrome.storage.local.get(s.TASKS))[s.TASKS]||[];if(t.length===0){const o=(await chrome.storage.sync.get(s.TASKS))[s.TASKS]||[];o.length>0&&(console.log("Migrating tasks from sync to local..."),t=o.map(a=>({...a,id:a.id||crypto.randomUUID(),totalTimeMs:a.totalTimeMs||0,sessionTimeMs:0,pomodorosCompleted:a.pomodorosCompleted||0,updatedAt:Date.now()})),await this.saveTasks(t))}return t},async saveTasks(e){await chrome.storage.local.set({[s.TASKS]:e})},async getTimerState(){return(await chrome.storage.local.get(s.TIMER))[s.TIMER]||r},async saveTimerState(e){await chrome.storage.local.set({[s.TIMER]:e})},async getSettings(){const e=await chrome.storage.local.get(s.SETTINGS);return{...n,...e[s.SETTINGS]||{}}},async saveSettings(e){await chrome.storage.local.set({[s.SETTINGS]:e})},onChange(e){chrome.storage.onChanged.addListener(e)}};export{l as S};
