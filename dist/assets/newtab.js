const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SettingsModal.js","assets/storage.js"])))=>i.map(i=>d[i]);
var ie=Object.defineProperty;var oe=(g,e,n)=>e in g?ie(g,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):g[e]=n;var f=(g,e,n)=>oe(g,typeof e!="symbol"?e+"":e,n);import"./main.js";import{S as T}from"./storage.js";const ae="modulepreload",ce=function(g){return"/"+g},X={},re=function(e,n,c){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(r=>{if(r=ce(r),r in X)return;X[r]=!0;const m=r.endsWith(".css"),l=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${l}`))return;const d=document.createElement("link");if(d.rel=m?"stylesheet":ae,m||(d.as="script"),d.crossOrigin="",d.href=r,o&&d.setAttribute("nonce",o),document.head.appendChild(d),m)return new Promise((u,v)=>{d.addEventListener("load",u),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${r}`)))})}))}function t(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&t(o.reason);return e().catch(t)})};class de{constructor(e){this.container=e}render(e,n,c,i){var t,s;this.container.innerHTML=`
      <div class="zen-header">
        <div class="left">
          <span class="logo">‚òØ ZenTask</span>
        </div>
        <div class="center">
          <span class="status-text">${e}</span>
        </div>
        <div class="right" style="display:flex;gap:4px;">
          <button id="sound-toggle" class="icon-btn" title="${n?"Mute":"Unmute"}">${n?"üîä":"üîá"}</button>
          <button id="settings-btn" class="icon-btn" title="Settings">‚ò∞</button>
        </div>
      </div>
    `,(t=this.container.querySelector("#sound-toggle"))==null||t.addEventListener("click",c),(s=this.container.querySelector("#settings-btn"))==null||s.addEventListener("click",i)}}class ee{constructor(e){f(this,"ctx");f(this,"animationId",0);f(this,"state",null);f(this,"theme","forest");f(this,"phase",0);f(this,"particles",[]);f(this,"mouse",{x:0,y:0,active:!1});f(this,"prefersReducedMotion",!1);f(this,"animate",()=>{this.render(),this.animationId=requestAnimationFrame(this.animate)});this.canvas=e,this.ctx=e.getContext("2d"),this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.initParticles()}start(){this.animate()}stop(){cancelAnimationFrame(this.animationId)}updateState(e,n){this.state=e,this.theme!==n&&(this.theme=n,this.initParticles())}updateMouse(e,n){this.mouse.x=e,this.mouse.y=n,this.mouse.active=!0}initParticles(){this.particles=[];const e=this.theme==="space"?60:30;for(let n=0;n<e;n++)this.particles.push({x:0,y:0,r:Math.random()*1.8+.4,speed:Math.random()*.3+.05,angle:Math.random()*Math.PI*2,dist:Math.random()*80+30})}render(){if(!this.canvas)return;const e=this.canvas.width,n=this.canvas.height,c=e/2,i=n/2;this.ctx.clearRect(0,0,e,n);const s={forest:{r:94,g:190,b:120},rain:{r:94,g:170,b:239},summer:{r:239,g:190,b:94},space:{r:160,g:120,b:239}}[this.theme];let o=.015,r=.1,m=.15;this.state&&this.state.isRunning&&(o=this.state.mode==="focus"?.04:.012,r=this.state.mode==="focus"?.2:.08,m=this.state.mode==="focus"?.3:.12),this.prefersReducedMotion&&(o=0),this.phase+=o;let l=0,d=0;this.mouse.active&&(l=(this.mouse.x-c)*.05,d=(this.mouse.y-i)*.05);const u=90+Math.sin(this.phase)*12,v=this.ctx.createRadialGradient(c+l,i+d,u*.2,c+l,i+d,u*2);v.addColorStop(0,`rgba(${s.r},${s.g},${s.b},${r})`),v.addColorStop(.7,`rgba(${s.r},${s.g},${s.b},${r*.2})`),v.addColorStop(1,"rgba(0,0,0,0)"),this.ctx.fillStyle=v,this.ctx.beginPath(),this.ctx.arc(c+l,i+d,u*2,0,Math.PI*2),this.ctx.fill(),this.prefersReducedMotion||this.particles.forEach(y=>{y.angle+=y.speed*o;const S=u+y.dist+Math.sin(this.phase+y.angle*2)*10;let x=c+Math.cos(y.angle)*S,R=i+Math.sin(y.angle)*S;if(this.mouse.active){const $=this.mouse.x-x,C=this.mouse.y-R,A=Math.sqrt($*$+C*C);if(A<100){const I=(100-A)*.02;x+=$*I,R+=C*I}}const z=Math.sqrt(Math.pow(x-c,2)+Math.pow(R-i,2)),_=Math.max(0,1-z/(u*2.8));this.ctx.fillStyle=`rgba(${s.r},${s.g},${s.b},${m*_})`,this.ctx.beginPath(),this.ctx.arc(x,R,y.r,0,Math.PI*2),this.ctx.fill()})}}class le{constructor(e){f(this,"visualizer",null);this.container=e}render(e,n,c,i,t,s){var m;const o=Math.floor(e.remainingSeconds/60).toString().padStart(2,"0"),r=(e.remainingSeconds%60).toString().padStart(2,"0");if(this.container.querySelector(".timer-container")){const l=this.container.querySelector("#time-display");l&&(l.textContent=`${o}:${r}`,l.classList.remove("focus-glow","break-glow"),e.isRunning&&e.mode==="focus"?l.classList.add("focus-glow"):e.isRunning&&l.classList.add("break-glow"));const d=this.container.querySelector("#status-text");d&&(d.textContent=this.getStatusText(e))}else{this.container.innerHTML=`
        <div class="timer-container" style="position:relative; width:300px; height:300px; cursor: pointer;">
          <canvas id="zen-visualizer" width="300" height="300"
                  style="position:absolute; top:0; left:0; z-index:0; border-radius:50%; pointer-events:none;"></canvas>

          <div style="position:relative; z-index:1; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
            <div class="timer-time" id="time-display">${o}:${r}</div>

            <div class="timer-controls">
              <button id="main-action-btn" class="btn-primary">
                ${e.isRunning?"Pause":"Start Focus"}
              </button>
              <button id="skip-btn" class="btn-secondary" style="padding:10px 14px;">‚è≠</button>
            </div>

            <div class="status-indicator" id="status-text">${this.getStatusText(e)}</div>
          </div>
        </div>
      `;const l=this.container.querySelector("canvas");l&&(this.visualizer=new ee(l),this.visualizer.start()),(m=this.container.querySelector(".timer-container"))==null||m.addEventListener("click",d=>{d.target.tagName.toLowerCase()!=="button"&&s()})}this.bindButton("#main-action-btn",e.isRunning?"Pause":"Start Focus",l=>{l.stopPropagation(),e.isRunning?i():c()}),this.bindButton("#skip-btn",void 0,l=>{l.stopPropagation(),t()}),this.visualizer&&this.visualizer.updateState(e,n)}getStatusText(e){return e.mode==="focus"?`Focus ¬∑ Cycle ${e.cyclesCompleted+1}`:e.mode==="break"?"Short Break":e.mode==="longBreak"?"Long Rest":"Ready"}bindButton(e,n,c){var s;const i=this.container.querySelector(e);if(!i)return;n!==void 0&&(i.textContent=n);const t=i.cloneNode(!0);(s=i.parentNode)==null||s.replaceChild(t,i),t.addEventListener("click",c)}}class J{constructor(e){this.container=e}render(e,n,c,i,t,s){const o=[...e].sort((d,u)=>d.id===n?-1:u.id===n?1:(d.order||0)-(u.order||0));this.container.innerHTML=`
      <div class="task-list-panel">
        <div class="tasks-header">
            <span>Today's Cycle</span>
            <span style="font-size:0.8em;opacity:0.7">${e.filter(d=>d.isCompleted).length}/${e.length}</span>
        </div>

        <div class="task-list">
          ${o.length===0?'<div class="empty-state">Focus on one thing at a time.</div>':o.map(d=>this.renderTaskRow(d,n)).join("")}
        </div>
        
        <div class="task-input-container">
            <input type="text" id="new-task-input" class="task-input" placeholder="What is your next focus?" />
            <button id="add-task-btn" class="btn-secondary" style="padding:10px 16px;">+</button>
        </div>
      </div>
    `;const r=this.container.querySelector("#new-task-input"),m=this.container.querySelector("#add-task-btn"),l=()=>{r.value.trim()&&(c(r.value.trim()),r.value="")};m==null||m.addEventListener("click",l),r==null||r.addEventListener("keypress",d=>{d.key==="Enter"&&l()}),this.container.querySelectorAll(".task-item").forEach(d=>{var v,y;const u=d.dataset.id;(v=d.querySelector(".task-checkbox"))==null||v.addEventListener("click",S=>{S.stopPropagation(),i(u)}),(y=d.querySelector(".delete-task-btn"))==null||y.addEventListener("click",S=>{S.stopPropagation(),s(u)}),d.addEventListener("click",()=>{!d.classList.contains("completed")&&u!==n&&t(u)})})}renderTaskRow(e,n){const c=e.id===n,i=e.isCompleted,t=Math.floor((e.totalTimeMs||0)/6e4),s=t>0?`${Math.floor(t/60)}h ${t%60}m`:"";return`
        <div class="task-item ${c?"active":""} ${i?"completed":""}" data-id="${e.id}">
            <div class="task-checkbox">
                ${i?"‚úì":""}
            </div>
            <div class="task-content">
                <span class="task-title">${e.title}</span>
                <div class="task-meta">
                    ${c?'<span class="active-badge">‚óâ In Focus</span>':""}
                    ${e.pomodorosCompleted>0?`<span>${e.pomodorosCompleted} üçÖ</span>`:""}
                    ${s?`<span>${s}</span>`:""}
                </div>
            </div>
            <button class="delete-task-btn">√ó</button>
        </div>
      `}}class ue{constructor(e){f(this,"currentReminder","");f(this,"lastChangeTime",0);this.container=e}render(e){if(!e){this.container.innerHTML="",this.currentReminder="";return}const n=Date.now();if(this.currentReminder&&n-this.lastChangeTime<2500)return;const c=["Stretch your neck and shoulders","Close your eyes for 20 seconds","Drink some water","Take a deep breath"];let i=c[Math.floor(Math.random()*c.length)];i===this.currentReminder&&c.length>1&&(i=c[(c.indexOf(i)+1)%c.length]),this.currentReminder=i,this.lastChangeTime=n,this.container.innerHTML=`
      <div class="zen-footer-reminder fade-in">
        <span class="reminder-icon">üçÉ</span>
        <span class="reminder-text">${i}</span>
      </div>
    `}}class he{constructor(){f(this,"ctx",null);f(this,"masterGain",null);f(this,"ambienceGain",null);f(this,"cueGain",null);f(this,"ambienceElement",null);f(this,"ambienceSourceNode",null);f(this,"currentAmbienceId","none");f(this,"cuesEnabled",!0);f(this,"THEME_SOUNDS",{forest:{focus:"https://actions.google.com/sounds/v1/ambiences/forest_daybreak.ogg",break:"https://actions.google.com/sounds/v1/water/stream_water_flowing.ogg"},rain:{focus:"https://actions.google.com/sounds/v1/ambiences/rain_heavy_loud.ogg",break:"https://actions.google.com/sounds/v1/water/rain_on_roof.ogg"},summer:{focus:"https://actions.google.com/sounds/v1/ambiences/field_at_night.ogg",break:"https://actions.google.com/sounds/v1/ambiences/morning_birds.ogg"},space:{focus:"white_noise",break:"singing_bowls"}})}async init(){this.ctx||(this.ctx=new AudioContext,this.masterGain=this.ctx.createGain(),this.masterGain.connect(this.ctx.destination),this.ambienceGain=this.ctx.createGain(),this.ambienceGain.connect(this.masterGain),this.cueGain=this.ctx.createGain(),this.cueGain.connect(this.masterGain))}async updateSettings(e){if(this.ctx||await this.init(),!this.ctx||!this.masterGain)return;this.ctx.state==="suspended"&&await this.ctx.resume();const n=e.enableSound?e.masterVolume/100:0;this.masterGain.gain.setTargetAtTime(n,this.ctx.currentTime,.1),this.cuesEnabled=e.enableCues!==!1}async playCue(e){if(!this.cuesEnabled||(this.ctx||await this.init(),!this.ctx||!this.cueGain))return;const n=this.ctx.currentTime,c=this.ctx.createOscillator();c.type="sine",c.frequency.setValueAtTime(220,n);const i=this.ctx.createOscillator();i.type="sine",i.frequency.setValueAtTime(440,n);const t=this.ctx.createOscillator();t.type="sine",t.frequency.setValueAtTime(660,n);const s=this.ctx.createGain();s.connect(this.cueGain),s.gain.setValueAtTime(0,n),s.gain.linearRampToValueAtTime(.6,n+.01),s.gain.exponentialRampToValueAtTime(.3,n+.3),s.gain.exponentialRampToValueAtTime(.01,n+3),c.connect(s),i.connect(s),t.connect(s),[c,i,t].forEach(o=>{o.start(n),o.stop(n+3)})}async playThemeAmbience(e,n){if(this.ctx||await this.init(),!this.ctx||!this.ambienceGain)return;const c=this.THEME_SOUNDS[e],i=n==="focus"?c.focus:c.break,t=`${e}_${n}`;if(this.currentAmbienceId===t)return;await this.stopAmbience(),this.currentAmbienceId=t;const s=.5;if(this.ambienceGain.gain.setValueAtTime(0,this.ctx.currentTime),this.ambienceGain.gain.linearRampToValueAtTime(s,this.ctx.currentTime+3),i.startsWith("http"))this.ambienceElement=new Audio(i),this.ambienceElement.crossOrigin="anonymous",this.ambienceElement.loop=!0,this.ambienceSourceNode=this.ctx.createMediaElementSource(this.ambienceElement),this.ambienceSourceNode.connect(this.ambienceGain),await this.ambienceElement.play().catch(o=>console.error("Audio play failed:",o));else if(i!=="none"){const o=this.generateNoise(i),r=this.ctx.createBufferSource();r.buffer=o,r.loop=!0,r.connect(this.ambienceGain),r.start(),this.generatedSource=r}}async stopAmbience(){if(this.ctx&&this.ambienceGain&&(this.ambienceGain.gain.cancelScheduledValues(this.ctx.currentTime),this.ambienceGain.gain.setTargetAtTime(0,this.ctx.currentTime,.8)),this.ambienceElement){const e=this.ambienceElement,n=this.ambienceSourceNode;setTimeout(()=>{e.pause(),e.src="",n==null||n.disconnect()},1e3),this.ambienceElement=null,this.ambienceSourceNode=null}if(this.generatedSource){const e=this.generatedSource;setTimeout(()=>{try{e.stop(),e.disconnect()}catch{}},1e3),this.generatedSource=null}this.currentAmbienceId="none"}generateNoise(e){if(!this.ctx)throw new Error("No AudioContext");const n=this.ctx.sampleRate,c=4*n,i=this.ctx.createBuffer(1,c,n),t=i.getChannelData(0);if(e==="white_noise")for(let s=0;s<c;s++)t[s]=(Math.random()*2-1)*.1;else if(e==="singing_bowls")for(let s=0;s<c;s++){const o=s/n,r=174+Math.sin(o*.1)*2,m=r*1.5;t[s]=(Math.sin(2*Math.PI*r*o)*.4+Math.sin(2*Math.PI*m*o)*.2)*.3}return i}}const Q=document.getElementById("app"),L=new he;if(Q){Q.innerHTML=`
      <div class="zen-layout">
        <header id="header-zone"></header>
        <main id="main-zone">
            <div id="timer-section"></div>
            <div id="tasks-section"></div>
        </main>
        <div id="focus-view"></div>
        <footer id="footer-zone"></footer>
      </div>
    `;const g=new de(document.getElementById("header-zone")),e=new le(document.getElementById("timer-section")),n=new J(document.getElementById("tasks-section")),c=new ue(document.getElementById("footer-zone")),i=document.getElementById("focus-view");let t=null,s=[],o=null,r="list",m=null,l=null;const d=(a,h=2500)=>{let p=document.querySelector(".zen-toast");p||(p=document.createElement("div"),p.className="zen-toast",document.body.appendChild(p)),p.textContent=a,p.classList.remove("show"),p.offsetWidth,p.classList.add("show"),setTimeout(()=>p.classList.remove("show"),h)},u=async()=>{t=await chrome.runtime.sendMessage({type:"GET_STATE"}),s=await T.getTasks(),o=await T.getSettings(),await L.updateSettings(o),v()},v=()=>{if(!t||!o)return;const a=t.isRunning?t.mode==="focus"?"Focusing...":"Resting...":"ZenTask";g.render(a,o.enableSound,te,se),c.render(t.mode!=="focus"&&t.isRunning),r==="focus"?S():y(),N(t)},y=()=>{if(!t)return;document.getElementById("main-zone").classList.remove("hidden"),i.classList.remove("active"),e.render(t,o.theme,()=>{chrome.runtime.sendMessage({type:"START_TIMER",payload:{taskId:_()}}).then(()=>{r="focus",m="focus",u(),d("‚ú¶ Focus started")})},()=>chrome.runtime.sendMessage({type:"PAUSE_TIMER"}).then(u),()=>chrome.runtime.sendMessage({type:"SKIP_TIMER"}).then(u),()=>{r="focus",m="focus",v()}),n.render(s,t.activeTaskId,h=>$(h),h=>C(h),h=>{A(h).then(()=>{r="focus",m="focus",u(),d("‚ú¶ Focus started")})},h=>I(h))},S=()=>{var F,U,H,O,Z,W;if(!t||!o)return;document.getElementById("main-zone").classList.add("hidden"),i.classList.add("active");const h=s.find(b=>b.id===t.activeTaskId),p=h?h.title:"Focus";let E="Idle";t.isRunning&&t.mode==="focus"?E=`Focus ¬∑ Cycle ${t.cyclesCompleted+1}`:t.isRunning&&t.mode==="break"?E="Short Break":t.isRunning&&t.mode==="longBreak"?E="Long Rest":t.isRunning||(E="Paused");const w=Math.floor(t.remainingSeconds/60).toString().padStart(2,"0"),k=(t.remainingSeconds%60).toString().padStart(2,"0"),B=150,V=2*Math.PI*B;let q=o.focusDuration*60;t.mode==="break"?q=o.breakDuration*60:t.mode==="longBreak"&&(q=o.longBreakDuration*60);const ne=q>0?t.remainingSeconds/q:0,D=V*(1-ne);if(i.querySelector(".focus-timer-wrap")){const b=i.querySelector("#fv-task-title");b&&(b.textContent=p);const j=i.querySelector("#fv-time");j&&(j.textContent=`${w}:${k}`);const K=i.querySelector("#fv-state");K&&(K.textContent=E);const Y=i.querySelector("#fv-ring");Y&&Y.setAttribute("stroke-dashoffset",String(D))}else{i.innerHTML=`
              <div class="focus-task-title" id="fv-task-title">${p}</div>
              <div class="focus-timer-wrap">
                <svg class="progress-ring" width="320" height="320">
                  <circle class="progress-ring__bg" cx="160" cy="160" r="${B}" />
                  <circle class="progress-ring__fill" id="fv-ring" cx="160" cy="160" r="${B}"
                          stroke-dasharray="${V}" stroke-dashoffset="${D}" />
                </svg>
                <canvas id="focus-visualizer" width="320" height="320"></canvas>
                <div class="focus-time" id="fv-time">${w}:${k}</div>
              </div>
              <div class="focus-state-label" id="fv-state">${E}</div>
              <div class="focus-controls" id="fv-controls"></div>
              <button class="focus-exit-btn" id="fv-exit">‚Üê Exit Focus View</button>
              <button class="focus-show-tasks-btn" id="fv-show-tasks">Show Tasks</button>
            `;const b=i.querySelector("#focus-visualizer");b&&(l=new ee(b),l.start())}l&&l.updateState(t,o.theme);const M=i.querySelector("#fv-controls");M&&(t.isRunning?M.innerHTML=`
                  <button class="btn-primary" id="fv-pause">Pause</button>
                  <button class="btn-secondary" id="fv-skip" style="padding:10px 14px;">‚è≠</button>
                `:M.innerHTML=`
                  <button class="btn-primary" id="fv-resume">Resume</button>
                  <button class="btn-danger" id="fv-stop">Stop</button>
                  <button class="btn-secondary" id="fv-skip" style="padding:10px 14px;">‚è≠</button>
                `,(F=M.querySelector("#fv-pause"))==null||F.addEventListener("click",()=>{chrome.runtime.sendMessage({type:"PAUSE_TIMER"}).then(u)}),(U=M.querySelector("#fv-resume"))==null||U.addEventListener("click",()=>{chrome.runtime.sendMessage({type:"START_TIMER",payload:{taskId:_()}}).then(u)}),(H=M.querySelector("#fv-stop"))==null||H.addEventListener("click",()=>{chrome.runtime.sendMessage({type:"RESET_TIMER"}).then(()=>{x()})}),(O=M.querySelector("#fv-skip"))==null||O.addEventListener("click",()=>{chrome.runtime.sendMessage({type:"SKIP_TIMER"}).then(u)}));const P=i.querySelector("#fv-exit");if(P){const b=P.cloneNode(!0);(Z=P.parentNode)==null||Z.replaceChild(b,P),b.addEventListener("click",()=>x())}const G=i.querySelector("#fv-show-tasks");if(G){const b=G.cloneNode(!0);(W=G.parentNode)==null||W.replaceChild(b,G),b.addEventListener("click",()=>R())}},x=()=>{r="list",m=null,l&&(l.stop(),l=null),i.innerHTML="",u()},R=()=>{if(!t)return;const a=document.createElement("div");a.className="task-drawer-overlay";const h=document.createElement("div");h.className="task-drawer";const p=document.createElement("div");new J(p).render(s,t.activeTaskId,k=>{$(k),w()},k=>{C(k),w()},k=>{A(k),w()},k=>{I(k),w()}),h.appendChild(p),document.body.appendChild(a),document.body.appendChild(h),requestAnimationFrame(()=>{a.classList.add("visible"),h.classList.add("open")});const w=()=>{h.classList.remove("open"),a.classList.remove("visible"),setTimeout(()=>{a.remove(),h.remove(),u()},350)};a.addEventListener("click",w)},z=a=>{if(!m||!o){m=a.mode;return}a.mode!==m&&(a.mode==="focus"&&(m==="break"||m==="longBreak")?d("‚ú¶ Back to focus"):(a.mode==="break"||a.mode==="longBreak")&&(d("üåø Break time"),o.autoReturnToListOnBreak&&r==="focus"&&x()),m=a.mode)},_=()=>t==null?void 0:t.activeTaskId,$=async a=>{const h={id:crypto.randomUUID(),title:a,isCompleted:!1,estimatedMinutes:25,createdAt:Date.now(),order:s.length,totalTimeMs:0,sessionTimeMs:0,pomodorosCompleted:0};s.push(h),await T.saveTasks(s),u()},C=async a=>{const h=s.find(p=>p.id===a);h&&(h.isCompleted=!h.isCompleted,await T.saveTasks(s),u())},A=async a=>{t!=null&&t.isRunning&&await chrome.runtime.sendMessage({type:"PAUSE_TIMER"}),await chrome.runtime.sendMessage({type:"START_TIMER",payload:{taskId:a}})},I=async a=>{(t==null?void 0:t.activeTaskId)===a&&t.isRunning&&await chrome.runtime.sendMessage({type:"PAUSE_TIMER"}),s=s.filter(h=>h.id!==a),await T.saveTasks(s),u()},te=async()=>{o||(o=await T.getSettings());const a=!o.enableSound;o={...o,enableSound:a},await T.saveSettings(o),await L.updateSettings(o),a?t&&await N(t):await L.stopAmbience(),v()},se=()=>{re(async()=>{const{SettingsPanel:a}=await import("./SettingsModal.js");return{SettingsPanel:a}},__vite__mapDeps([0,1])).then(({SettingsPanel:a})=>{new a(()=>u()).open()})},N=async a=>{if(o||(o=await T.getSettings()),!o.enableSound){await L.stopAmbience();return}a.isRunning?await L.playThemeAmbience(o.theme,a.mode):await L.stopAmbience()};u(),T.onChange(a=>{a.zen_settings&&u()}),chrome.runtime.onMessage.addListener(a=>{if(a.type==="TIMER_UPDATE"){const h=a.payload;z(h),t=h,v()}else a.type==="PLAY_CUE"&&L.playCue(a.payload)}),window.addEventListener("mousemove",a=>{l&&l.updateMouse(a.clientX,a.clientY)})}
